# TrainBookingSystem
## 高铁订票系统
>此项目为大二数据结构与算法大作业，使用C++编写，但其实只使用了C++的引用特性和标准输入输出流，其他基本上都是C的语法。没有使用C++的类和容器是因为书里没用，用的话相当于走了捷径（其实让我用我也不会用），总之写的很烂，但还是想挂在github上留个回忆 

**注意:** 此项目只能运行在windows平台上，因为所有源代码文件均为gb2312格式。由于是在windows控制台上运行，所以想显示中文只能调整为gb2312格式编码。我目前还不会使用utf-8编码在windows控制台上不乱码的方法。

### 项目介绍
- 本项目共分为三个模块，每个模块包含增删改查四个最基本组成部分
1. 高铁车次信息管理
需要管理的信息包括：车次、始发站、终到站、发车时间、票价、运行情况（是否停运），及停靠车站、各站点进站时间、出站时间、里程（单位公里）等，还包括高铁运行时间、各种坐席数量、票价等
2. 乘客信息管理
数据项：证件类别、证件号、姓名、手机号、紧急联系人，紧急联系人电话等
3. 高铁订票信息管理
订票信息应包括订单号、乘车人姓名、乘车日期、起点站、终点站、证件号、开车时间、票价、座位号等，还可以包括订票时间、坐席等级等信息

### 编译运行
- 此程序编译运行环境为：Windows11 + CMake + MinGW，编译程序前请预先配置CMake和MinGW环境，并将bin目录添加到系统环境变量中。环境设置完成后请执行文件夹中的build.bat文件进行编译。

### 算法实现
订票程序采用了搜索树进行余票查询，具体使用左孩子右兄弟表示法：

<center>

![左孩子右兄弟表示法](https://user-images.githubusercontent.com/65226449/216743664-3c89a238-cdc7-440c-8a39-01411e960c3f.png)
</center>

搜索树共分为五层：

![订票搜索树](https://user-images.githubusercontent.com/65226449/216743649-d8461c56-e64b-4925-8763-f68aa3f59401.png)

其中自日期开始level分别为1、2、3、4、5
- 日期-车次-座位等级-座位号-停靠站识别码五个元素可以生成一个车票识别码，搜索树将车票识别码进行拆分，然后插入对应层级的节点。停靠站识别码是根据车次的起点、终点、停靠站数量生成的、用于记录座位号占用情况的整数数组，长度为停靠站数量，采用0和1进行表示。假设有五个停靠站，张三从第一站上车，第三站下车，则停靠站识别码为11000，张三只占用了第一和第二站，所以前两位为1，后三位为0。插入时如果相同遇到相同座位号，则将停靠站识别码进行合并。查询余票时，根据用户所输入的车次以及起点站、终点站可以生成一个停靠站识别码，将生成的识别码与搜索树的树叶进行比较，如果冲突（下标相同的位置同时为1），则该叶子节点对应的座位等级和座位号不可用。